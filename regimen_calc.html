<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <title>Regimen Calc</title>
        <link href="style.css" rel="stylesheet" type="text/css">
        <script src="jquery.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
        <script>
            $(document).ready(function(){
                $("#regimen_plan").sortable({connectWith:"#regimen_list"});
                $("#regimen_list").sortable({connectWith:"#regimen_plan"});
            });
            function clickCalculate(e) {
                //Treatment内のliタグを文字として取得
                const li = document.getElementById("regimen_plan").textContent;
                var str = "";
                for (let i = 0; i < li.length; i++ ){
                    str = str.concat(li[i]);
                }
                //改行や空白を除去し、1次元配列を経由し、2次元配列としてExport
                str = str.replace(/\r?\n/g,"");
                str = str.trim();
                var arr = str.split("_");
                arr.pop();
                var arr2 = [];
                while(arr.length)
                    arr2.push(arr.splice(0,5));
                alert('計算が開始されました。\n\n'+arr2);
            }
        </script>
    </head>
    <body>
        <header>
            <h1>Regimen Calc</h1>
        </header>
        <button type="button" onclick="clickCalculate()">Calculate!</button>
        <fieldset id="top">
            <legend>Treatment</legend>
            <ol id="regimen_plan" type="1">
                <li id="R-CHOP">R-CHOP<div class="regimen_property"><p>_id_1_name_R-CHOP_</p></div></li>
            </ol>
        </fieldset>
        <fieldset id="bottom">
            <legend>Regimen List</legend>
            <ol id="regimen_list">
                <li id="FOLFOX">FOLFOX<div class="regimen_property"><p>_id_2_name_FOLFOX_</p></div></li>
                <li id="CapeOx">CapeOx<div class="regimen_property"><p>_id_3_name_CapeOx_</p></div></li>
                <li id="FOLFIRI0">FOLFIRI<div class="regimen_property"><p>_id_4_name_FOLFIRI_</p></div></li>
            </ol>
        </fieldset>
    </body>
</html>
